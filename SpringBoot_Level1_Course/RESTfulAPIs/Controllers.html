<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head>
    <title>RESTful APIs - Creating Controllers</title>
    <style type="text/css" media="screen">
		@import url( ../shared/style.css );
	</style>
	<script src="../shared/scormfunctions.js" type="text/javascript"></script>
	<script src="../shared/contentfunctions.js" type="text/javascript"></script>
</head>
<body>
<h1>Creating the Controller Layer</h1>

<h2>What is a Controller?</h2>
<p>The Controller layer handles incoming HTTP requests and returns HTTP responses. It acts as the entry point for your REST API.</p>

<h2>Basic REST Controller</h2>
<p>Spring Boot simplifies controller creation with the @RestController annotation:</p>
<blockquote>
@RestController<br/>
public class WelcomeController {<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@GetMapping("/api/welcome")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;public String welcomeMessage() {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "Welcome to Spring Boot!";<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
}
</blockquote>

<h2>Handling Request Data</h2>
<p>Controllers use specific annotations to extract data from HTTP requests:</p>

<h3>@PathVariable - URL Segments</h3>
<blockquote>
@GetMapping("/api/users/{id}")<br/>
public User getUserById(@PathVariable Long id) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;return userService.findById(id);<br/>
}
</blockquote>

<h3>@RequestParam - Query Parameters</h3>
<blockquote>
@GetMapping("/api/users")<br/>
public List&lt;User&gt; getUsers(@RequestParam(required = false) String status) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;return userService.findByStatus(status);<br/>
}
</blockquote>

<h3>@RequestBody - Request Body</h3>
<blockquote>
@PostMapping("/api/users")<br/>
public User createUser(@RequestBody User user) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;return userService.save(user);<br/>
}
</blockquote>

<h2>Complete CRUD Controller Example</h2>
<blockquote>
@RestController<br/>
@RequestMapping("/api/todos")<br/>
public class TodoController {<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;private final TodoService todoService;<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;public TodoController(TodoService todoService) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.todoService = todoService;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@GetMapping<br/>
&nbsp;&nbsp;&nbsp;&nbsp;public List&lt;Todo&gt; getAllTodos() {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return todoService.findAll();<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@PostMapping<br/>
&nbsp;&nbsp;&nbsp;&nbsp;public Todo createTodo(@RequestBody Todo todo) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return todoService.save(todo);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@PutMapping("/{id}")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;public Todo updateTodo(@PathVariable Long id, @RequestBody Todo todo) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return todoService.update(id, todo);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@DeleteMapping("/{id}")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;public void deleteTodo(@PathVariable Long id) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;todoService.delete(id);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
}
</blockquote>

<h2>Response Handling</h2>
<p>@RestController automatically converts Java objects to JSON using Jackson library. You can also use ResponseEntity for more control:</p>
<blockquote>
@GetMapping("/{id}")<br/>
public ResponseEntity&lt;Todo&gt; getTodoById(@PathVariable Long id) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;Todo todo = todoService.findById(id);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;if (todo != null) {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ResponseEntity.ok(todo);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} else {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ResponseEntity.notFound().build();<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
}
</blockquote>

<script type="text/javascript">
// No promotional content
</script>
</body>
</html>