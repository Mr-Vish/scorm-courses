<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head>
    <title>Strategy Comparison</title>
    <style type="text/css" media="screen">
		@import url( ../shared/style.css );
	</style>
	<script src="../shared/scormfunctions.js" type="text/javascript"></script>
	<script src="../shared/contentfunctions.js" type="text/javascript"></script>
</head>
<body>
<h1>Generation Strategy Comparison</h1>

<h2>Detailed Strategy Analysis</h2>
<table>
    <tr>
        <th>Aspect</th>
        <th>IDENTITY</th>
        <th>SEQUENCE</th>
        <th>TABLE</th>
    </tr>
    <tr>
        <td class="rowheader">Database Support</td>
        <td>MySQL, SQL Server</td>
        <td>PostgreSQL, Oracle</td>
        <td>All databases</td>
    </tr>
    <tr>
        <td class="rowheader">Performance</td>
        <td>Fast (single instance)</td>
        <td>Fast (with allocation)</td>
        <td>Slow (table locking)</td>
    </tr>
    <tr>
        <td class="rowheader">Multi-Instance</td>
        <td>❌ Unsafe</td>
        <td>✅ Safe</td>
        <td>⚠️ Problematic</td>
    </tr>
    <tr>
        <td class="rowheader">Batch Inserts</td>
        <td>Not supported</td>
        <td>Supported</td>
        <td>Supported</td>
    </tr>
    <tr>
        <td class="rowheader">ID Pre-allocation</td>
        <td>No</td>
        <td>Yes</td>
        <td>Yes</td>
    </tr>
</table>

<h2>Why IDENTITY Fails in Multi-Instance</h2>
<p>IDENTITY relies on database auto-increment, which is session-specific. Multiple application instances create separate database sessions, each unaware of IDs generated by others.</p>

<div class="code-block">
<pre><code>// Instance 1 inserts Order
INSERT INTO orders (customer_name) VALUES ('Alice');
// Database assigns ID = 1

// Instance 2 simultaneously inserts Order  
INSERT INTO orders (customer_name) VALUES ('Bob');
// Database assigns ID = 1 (collision!)
</code></pre>
</div>

<h2>Why SEQUENCE Works</h2>
<p>Sequences are database-level objects shared across all sessions. With proper allocation size, each instance pre-fetches a range of IDs.</p>

<div class="code-block">
<pre><code>// Instance 1 fetches IDs 1-50 from sequence
// Instance 2 fetches IDs 51-100 from sequence
// No collision possible
</code></pre>
</div>

<h2>TABLE Strategy Issues</h2>
<ul>
    <li>Requires row-level locking on ID table</li>
    <li>Creates bottleneck under high concurrency</li>
    <li>Slower than SEQUENCE approach</li>
    <li>Can cause deadlocks in some scenarios</li>
</ul>

<h2>Recommendation</h2>
<p>For multi-instance deployments:</p>
<ul>
    <li><strong>Best:</strong> SEQUENCE with allocationSize ≥ 50</li>
    <li><strong>Alternative:</strong> UUID-based IDs</li>
    <li><strong>Avoid:</strong> IDENTITY and TABLE strategies</li>
</ul>

<script type="text/javascript">
</script>
</body>
</html>
