<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head>
    <title>2. GenerationType.SEQUENCE ⚠️ Safe with Correct Configuration</title>
    <style type="text/css" media="screen">
		@import url( ../shared/style.css );
	</style>
	<script src="../shared/scormfunctions.js" type="text/javascript"></script>
	<script src="../shared/contentfunctions.js" type="text/javascript"></script>
</head>
<body>
<h1>2. GenerationType.SEQUENCE ⚠️ Safe with Correct Configuration</h1>

<ul>
    <li>Uses a database sequence to generate IDs.
</li>
    <li>Hibernate can <strong>preallocate</strong> ID blocks to reduce DB hits using <code>allocationSize</code>.
</li>
</ul>

<p><strong>Risk of collision if</strong>:</p>

<ul>
    <li>Each instance uses its own local sequence (e.g., in-memory DB).
</li>
    <li><code>allocationSize</code> is not properly configured or mismatched with the database.
</li>
</ul>

<p><strong>✅ Best Practice</strong>:</p>

<div class="code-block">
<pre><code>@SequenceGenerator(
name = &quot;user_seq_gen&quot;,
sequenceName = &quot;user_sequence&quot;,
allocationSize = 50
)
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;user_seq_gen&quot;)
private Long id;</code></pre>
</div>

<p>Ensure:</p>

<ul>
    <li>All instances use the <strong>same shared database</strong>.
</li>
    <li>The DB sequence increments match the <code>allocationSize</code>.
</li>
</ul>

<script type="text/javascript">
</script>
</body>
</html>