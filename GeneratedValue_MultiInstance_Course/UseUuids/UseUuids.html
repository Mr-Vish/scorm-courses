<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head>
    <title>UUID Solution</title>
    <style type="text/css" media="screen">
		@import url( ../shared/style.css );
	</style>
	<script src="../shared/scormfunctions.js" type="text/javascript"></script>
	<script src="../shared/contentfunctions.js" type="text/javascript"></script>
</head>
<body>
<h1>UUID Solution for Collision-Free IDs</h1>

<h2>Why UUIDs?</h2>
<p>UUIDs (Universally Unique Identifiers) are 128-bit values with collision probability so low (1 in 2^122) that they're effectively collision-free across all instances.</p>

<h2>UUID Implementation</h2>
<div class="code-block">
<pre><code>import org.hibernate.annotations.GenericGenerator;
import javax.persistence.*;
import java.util.UUID;

@Entity
public class Order {
    @Id
    @GeneratedValue(generator = "uuid2")
    @GenericGenerator(
        name = "uuid2",
        strategy = "uuid2"
    )
    @Column(columnDefinition = "VARCHAR(36)")
    private String id;
    
    private String customerName;
    private BigDecimal amount;
    
    // Getters and setters
}
</code></pre>
</div>

<h2>Alternative: Java UUID</h2>
<div class="code-block">
<pre><code>@Entity
public class Order {
    @Id
    @Column(columnDefinition = "VARCHAR(36)")
    private String id;
    
    private String customerName;
    
    @PrePersist
    public void generateId() {
        if (id == null) {
            id = UUID.randomUUID().toString();
        }
    }
}
</code></pre>
</div>

<h2>UUID Advantages</h2>
<ul>
    <li><strong>Zero Collision Risk:</strong> Globally unique across all instances</li>
    <li><strong>No Database Dependency:</strong> Generated in application layer</li>
    <li><strong>Offline Generation:</strong> Can create IDs before database insert</li>
    <li><strong>Distributed System Friendly:</strong> Perfect for microservices</li>
    <li><strong>No Coordination Needed:</strong> Each instance independent</li>
</ul>

<h2>UUID Disadvantages</h2>
<ul>
    <li><strong>Storage Size:</strong> 36 bytes vs 8 bytes for Long</li>
    <li><strong>Index Performance:</strong> Random UUIDs hurt B-tree performance</li>
    <li><strong>Readability:</strong> Not human-friendly</li>
    <li><strong>URL Length:</strong> Longer URLs in REST APIs</li>
</ul>

<h2>Performance Optimization</h2>
<p>Use binary UUID storage for better performance:</p>
<div class="code-block">
<pre><code>@Entity
public class Order {
    @Id
    @GeneratedValue(generator = "uuid2")
    @GenericGenerator(
        name = "uuid2",
        strategy = "uuid2"
    )
    @Column(columnDefinition = "BINARY(16)")
    private UUID id;  // Store as binary, not string
}
</code></pre>
</div>

<h2>When to Use UUIDs</h2>
<ul>
    <li>Multi-instance production deployments</li>
    <li>Microservices architectures</li>
    <li>Systems requiring offline ID generation</li>
    <li>When database doesn't support sequences</li>
    <li>Distributed databases (Cassandra, DynamoDB)</li>
</ul>

<script type="text/javascript">
</script>
</body>
</html>
